## 共享调度器开发日志

### 2022.09.26 讨论
#### 唤醒机制
* 赵：不创建内核协程、在用户态不断的 poll，阻塞的协程会进入回调队列中，先等其他的协程处理完之后，再来统一处理回调队列中阻塞的协程
* 廖：在写的协程执行完之后，直接在用户态来唤醒对应的读的协程

### 2022.09.24 

#### 共享调度器交流

##### 数据结构

* 每个进程维护一个队列的数据结构：自己可读写；
* 就绪协程的最优先级：自己可写、内核可读；

* 内核维护一个全局位图：内核写、用户进程只读；

##### 唤醒过程

* 时钟中断：读进程的“就绪协程的最优先级”，内核修改“全局位图”；可能强制切换或回到原来的进展执行；
* 用户进程主动让权：更新全局位图；依据位图的状态进行切换；

##### 结论

* 异步系统调用目前的实现是有问题的：需要在暂停时获得一个标识，在返回结果时使用；

##### 关于manager的讨论

* 一个仓库维护代码：设计文档（以王文智的为基础进行）
